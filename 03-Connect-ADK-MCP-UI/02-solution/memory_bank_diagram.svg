<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 550" style="font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;">
  <defs>
    <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="4"/>
      <feOffset dx="3" dy="3" result="offsetblur"/>
      <feComponentTransfer>
        <feFuncA type="linear" slope="0.15"/>
      </feComponentTransfer>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <linearGradient id="bankGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FFF8E1;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#FFECB3;stop-opacity:1" />
    </linearGradient>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#546E7A" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="100%" height="100%" fill="#ffffff"/>

  <!-- Title -->
  <text x="475" y="50" fill="#37474F" font-size="28" font-weight="bold" text-anchor="middle">Vertex AI Memory Bank</text>
  <text x="475" y="80" fill="#78909C" font-size="16" text-anchor="middle">Long-term state defined in deploy_agent.py</text>

  <!-- =========================================
       SECTION 1: THE CONFIGURATION (Definition)
       ========================================= -->
  <g transform="translate(50, 130)">
    <!-- Main Card -->
    <rect x="0" y="0" width="350" height="350" rx="20" fill="#F3E5F5" stroke="#BA68C8" stroke-width="3" filter="url(#softShadow)"/>
    
    <!-- Header -->
    <text x="175" y="40" fill="#8E24AA" font-size="20" font-weight="bold" text-anchor="middle">1. Definition</text>
    <text x="175" y="60" fill="#AB47BC" font-size="12" text-anchor="middle">deploy_agent.py</text>

    <!-- Custom Topics Block -->
    <g transform="translate(25, 90)">
        <rect width="300" height="100" rx="10" fill="#FFFFFF" stroke="#CE93D8" stroke-width="2"/>
        <text x="15" y="25" fill="#7B1FA2" font-size="14" font-weight="bold">Custom Topics:</text>
        
        <!-- Topic 1 -->
        <g transform="translate(15, 35)">
            <rect width="270" height="25" rx="5" fill="#F3E5F5"/>
            <text x="10" y="17" fill="#6A1B9A" font-size="12">üß∂ <b>sweater_preference</b> (style, pattern)</text>
            <text x="260" y="17" fill="#4CAF50" font-size="14">‚úì</text>
        </g>
        
        <!-- Topic 2 -->
        <g transform="translate(15, 65)">
            <rect width="270" height="25" rx="5" fill="#F3E5F5"/>
            <text x="10" y="17" fill="#6A1B9A" font-size="12">‚õ∑Ô∏è <b>personal_context</b> (hobbies, pets)</text>
            <text x="260" y="17" fill="#4CAF50" font-size="14">‚úì</text>
        </g>
    </g>

    <!-- Few Shot Block -->
    <g transform="translate(25, 210)">
        <rect width="300" height="110" rx="10" fill="#FFFFFF" stroke="#CE93D8" stroke-width="2"/>
        <text x="15" y="25" fill="#7B1FA2" font-size="14" font-weight="bold">Few-Shot Examples:</text>
        <foreignObject x="15" y="35" width="270" height="70">
            <div xmlns="http://www.w3.org/1999/xhtml" style="font-size:11px; color:#4A148C; line-height:1.4;">
                Teaching the model <i>how</i> to extract:<br/>
                User: "I have a golden retriever"<br/>
                <b>-> Memory: "User has a golden retriever"</b>
            </div>
        </foreignObject>
    </g>
  </g>

  <!-- =========================================
       ARROW: DEPLOYMENT
       ========================================= -->
  <g transform="translate(420, 280)">
    <text x="50" y="-15" fill="#546E7A" font-size="12" text-anchor="middle">Registers to Cloud</text>
    <line x1="0" y1="0" x2="100" y2="0" stroke="#90A4AE" stroke-width="4" marker-end="url(#arrow)"/>
  </g>

  <!-- =========================================
       SECTION 2: THE BANK (Runtime Storage)
       ========================================= -->
  <g transform="translate(550, 130)">
    <!-- Main Card -->
    <rect x="0" y="0" width="350" height="350" rx="20" fill="url(#bankGradient)" stroke="#FFB300" stroke-width="3" filter="url(#softShadow)"/>
    
    <!-- Vault Icon decoration -->
    <circle cx="310" cy="40" r="25" fill="#FFECB3" stroke="#FFCA28" stroke-width="2"/>
    <text x="310" y="48" font-size="24" text-anchor="middle">üîê</text>

    <!-- Header -->
    <text x="150" y="40" fill="#F57C00" font-size="20" font-weight="bold" text-anchor="middle">2. The Vault</text>
    <text x="150" y="60" fill="#FB8C00" font-size="12" text-anchor="middle">Agent Engine (Cloud)</text>

    <!-- Content: Stored Memories -->
    <g transform="translate(25, 90)">
        <text x="5" y="0" fill="#E65100" font-size="14" font-weight="bold">Active Memories:</text>
        
        <!-- Memory Card 1 -->
        <g transform="translate(0, 20)">
            <rect width="300" height="60" rx="8" fill="#FFF8E1" stroke="#FFE082"/>
            <text x="10" y="25" fill="#F57F17" font-size="12" font-weight="bold">Topic: sweater_preference</text>
            <text x="10" y="45" fill="#5D4037" font-size="11">"User loves snowflake patterns &amp; blue."</text>
        </g>

        <!-- Memory Card 2 -->
        <g transform="translate(0, 90)">
            <rect width="300" height="60" rx="8" fill="#FFF8E1" stroke="#FFE082"/>
            <text x="10" y="25" fill="#F57F17" font-size="12" font-weight="bold">Topic: personal_context</text>
            <text x="10" y="45" fill="#5D4037" font-size="11">"Has a dog named Max (Retriever)."</text>
        </g>
    </g>

    <!-- Access Info -->
    <g transform="translate(25, 270)">
        <rect width="300" height="50" rx="10" fill="#FFF3E0" stroke="#FFCC80" stroke-dasharray="4"/>
        <text x="150" y="20" fill="#E65100" font-size="11" font-weight="bold" text-anchor="middle">Used by main.py via:</text>
        <text x="150" y="38" fill="#BF360C" font-size="12" font-family="monospace" text-anchor="middle">VertexAiMemoryBankService</text>
    </g>
  </g>

  <!-- Instructions/Note on bottom -->
  <g transform="translate(200, 510)">
     <text x="0" y="0" fill="#78909C" font-size="12" font-style="italic">* The agent uses these memories to personalize tool calls (e.g. sweater color).</text>
  </g>

</svg>
