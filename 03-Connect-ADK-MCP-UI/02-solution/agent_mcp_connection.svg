<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 400" style="font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;">
  <defs>
    <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
      <feOffset dx="2" dy="2" result="offsetblur"/>
      <feComponentTransfer>
        <feFuncA type="linear" slope="0.2"/>
      </feComponentTransfer>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#90A4AE" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="100%" height="100%" fill="#ffffff"/>

  <!-- Title -->
  <text x="500" y="40" fill="#37474F" font-size="24" font-weight="bold" text-anchor="middle">Agent &lt;-&gt; MCP Walkthrough</text>

  <!-- =========================================
       STEP 1: USER INPUT
       ========================================= -->
  <g transform="translate(50, 100)">
    <!-- Badge -->
    <circle cx="20" cy="0" r="15" fill="#FF7043"/>
    <text x="20" y="5" fill="#FFF" font-size="14" font-weight="bold" text-anchor="middle">1</text>
    
    <!-- Card -->
    <rect x="0" y="20" width="180" height="200" rx="12" fill="#FFF3E0" stroke="#FFAB91" stroke-width="2" filter="url(#softShadow)"/>
    <text x="90" y="50" font-size="30" text-anchor="middle">ğŸ—£ï¸</text>
    <text x="90" y="80" fill="#D84315" font-size="16" font-weight="bold" text-anchor="middle">User Request</text>
    <foreignObject x="10" y="100" width="160" height="100">
      <div xmlns="http://www.w3.org/1999/xhtml" style="font-size:12px; color:#5D4037; text-align:center;">
        "I want a cute snowflake sweater!"
      </div>
    </foreignObject>
  </g>

  <!-- Arrow 1-2 -->
  <line x1="240" y1="200" x2="270" y2="200" stroke="#B0BEC5" stroke-width="3" marker-end="url(#arrow)"/>

  <!-- =========================================
       STEP 2: AGENT BRAIN
       ========================================= -->
  <g transform="translate(280, 100)">
    <!-- Badge -->
    <circle cx="20" cy="0" r="15" fill="#42A5F5"/>
    <text x="20" y="5" fill="#FFF" font-size="14" font-weight="bold" text-anchor="middle">2</text>
    
    <!-- Card -->
    <rect x="0" y="20" width="180" height="200" rx="12" fill="#E3F2FD" stroke="#90CAF9" stroke-width="2" filter="url(#softShadow)"/>
    <text x="90" y="50" font-size="30" text-anchor="middle">ğŸ§ </text>
    <text x="90" y="80" fill="#1565C0" font-size="16" font-weight="bold" text-anchor="middle">Agent Decides</text>
    
    <foreignObject x="10" y="100" width="160" height="100">
      <div xmlns="http://www.w3.org/1999/xhtml" style="font-size:11px; color:#0D47A1; text-align:center;">
        <b>Analysis:</b> User needs an image.<br/><br/>
        <b>Action:</b> Call Tool<br/>
        <span style="font-family:monospace; background:#BBDEFB; padding:2px;">generate_wearing_sweater</span>
      </div>
    </foreignObject>
  </g>

  <!-- Arrow 2-3 (Stdio) -->
  <line x1="470" y1="200" x2="500" y2="200" stroke="#546E7A" stroke-width="4" stroke-dasharray="5,3" marker-end="url(#arrow)"/>
  <text x="485" y="180" fill="#546E7A" font-size="10" text-anchor="middle">Stdio Pipe</text>

  <!-- =========================================
       STEP 3: MCP SERVER EXECUTION
       ========================================= -->
  <g transform="translate(510, 100)">
    <!-- Badge -->
    <circle cx="20" cy="0" r="15" fill="#AB47BC"/>
    <text x="20" y="5" fill="#FFF" font-size="14" font-weight="bold" text-anchor="middle">3</text>
    
    <!-- Card -->
    <rect x="0" y="20" width="180" height="200" rx="12" fill="#F3E5F5" stroke="#CE93D8" stroke-width="2" filter="url(#softShadow)"/>
    <text x="90" y="50" font-size="30" text-anchor="middle">ğŸ¨</text>
    <text x="90" y="80" fill="#6A1B9A" font-size="16" font-weight="bold" text-anchor="middle">MCP Tools</text>
    
    <foreignObject x="10" y="100" width="160" height="100">
      <div xmlns="http://www.w3.org/1999/xhtml" style="font-size:11px; color:#4A148C; text-align:center;">
        1. Executing Tool:<br/>
        <span style="font-family:monospace; background:#E1BEE7; padding:2px; font-weight:bold;">generate_wearing_sweater</span><br/><br/>
        2. Internal Call:<br/>
        <span style="font-size:10px;">Gemini 2.5 Flash (for pixels)</span>
      </div>
    </foreignObject>
  </g>

  <!-- Arrow 3-4 -->
  <line x1="700" y1="200" x2="730" y2="200" stroke="#B0BEC5" stroke-width="3" marker-end="url(#arrow)"/>

  <!-- =========================================
       STEP 4: RESULT
       ========================================= -->
  <g transform="translate(740, 100)">
    <!-- Badge -->
    <circle cx="20" cy="0" r="15" fill="#66BB6A"/>
    <text x="20" y="5" fill="#FFF" font-size="14" font-weight="bold" text-anchor="middle">4</text>
    
    <!-- Card -->
    <rect x="0" y="20" width="180" height="200" rx="12" fill="#E8F5E9" stroke="#A5D6A7" stroke-width="2" filter="url(#softShadow)"/>
    <text x="90" y="50" font-size="30" text-anchor="middle">ğŸ–¼ï¸</text>
    <text x="90" y="80" fill="#2E7D32" font-size="16" font-weight="bold" text-anchor="middle">Response</text>
    
    <foreignObject x="10" y="100" width="160" height="100">
      <div xmlns="http://www.w3.org/1999/xhtml" style="font-size:11px; color:#1B5E20; text-align:center;">
        "Done! Saved at..."<br/><br/>
        <div style="background:#C8E6C9; border:1px solid #4CAF50; border-radius:4px; padding:5px; font-weight:bold;">
           generated_selfie.png
        </div>
      </div>
    </foreignObject>
  </g>

</svg>
